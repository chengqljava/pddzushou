<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8" />
<title>${tenant.shortName!'屋瓴'}地产云系统</title>
<meta name="keywords" content="${tenant.shortName!'屋瓴'}地产云系统" />
<meta name="description" content="${tenant.shortName!'屋瓴'}地产云系统" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<% include("/include/_basic_styles.html"){} %> <%
include("/include/_basic_scripts.html"){} %>

</head>

<body>
	

	<div class="main-container" id="main-container">

		<div class="main-container-inner">

			<% include("/include/_sidebar.html",{active:"user-firm-admin-manager"}){} %>

			<div class="main-content">
			<% include("/include/_navbar.html"){} %>
				<div class="breadcrumbs" id="breadcrumbs">
					<ul class="breadcrumb">
						<li><i class="icon-home home-icon"></i> <a href="#">首页</a></li>
						<li class="active">账号管理</li>
					</ul>
					<!-- .breadcrumb -->
				</div>

				<div class="page-content">
					<div class="page-header">
						<h1>用户
							<small> <i class="icon-double-angle-right"></i> ${entity.id! != null ?'修改':'新增'} </small>
						</h1>
					</div>
					<!-- /.page-header -->

					<div class="row">
						<div class="col-xs-12">
							<!-- PAGE CONTENT BEGINS -->
							<div id="errors_div" ><% include("/include/_alert_template.html"){} %></div>

							<form onkeydown="if(event.keyCode==13)return false;" class="form-horizontal" name="entity" role="form" id="input_form" method="post" action="${ctxPath}/user/saveOrUpdate">
								<input type="hidden"  name="id" value="${entity.id!}"/>

								<div class="form-group">
									<label class="col-sm-3 control-label no-padding-right" for="userName"> 
										<em style="color: red;">*</em> 账户名称
									</label>
									<div class="col-sm-9">
										<input type="text" id="userName" name="userName" placeholder="输入账号名称" class="col-xs-10 col-sm-5" value="${entity.userName!}"/>
									</div>
								</div>
								
								<div class="form-group">
									<label class="col-sm-3 control-label no-padding-right" for="phone"> <em style="color: red;">*</em> 手机号: </label>

									<div class="col-sm-9">
										<input type="text" id="phone"  class="col-xs-10 col-sm-5" placeholder="请输入手机号" name="phone" value="${entity.phone!}"/>
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-3 control-label no-padding-right" for="confirmPhone"> <em style="color: red;">*</em> 确认手机号: </label>

									<div class="col-sm-9">
										<input type="text" id="confirmPhone"  class="col-xs-10 col-sm-5" name="confirmPhone" placeholder="请输入手机号" value="${entity.contactPhone!}"/>
									</div>
								</div>
									<div class="form-group">
									<label class="col-sm-3 control-label no-padding-right" for="password"> <em style="color: red;">*</em> 手机号: </label>

									<div class="col-sm-9">
										<input type="password" id="password"  class="col-xs-10 col-sm-5" placeholder="请输入密码" name="password" value="${entity.password!}"/>
									</div>
								</div>
								
								<div class="space-4"></div>
								<div class="clearfix form-actions">
									<div class="col-md-offset-3 col-md-9">
										<button class="btn btn-info" type="submit" style="width:20%" >
											<i class="icon-ok bigger-110"></i>
											提交
										</button>
										&nbsp; &nbsp; &nbsp;
										<button class="btn" type="reset" style="width:20%">
											<i class="icon-undo bigger-110"></i>
											重置
										</button>
									</div>
								</div>
							</form>

							<!-- PAGE CONTENT ENDS -->
						</div>
						<!-- /.col -->
					</div>
					<!-- /.row -->

				</div>
				<!-- /.page-content -->

			</div>
			<!-- /.main-content -->

		</div>
		<!-- /.main-container-inner -->

		<a href="#" id="btn-scroll-up"
			class="btn-scroll-up btn btn-sm btn-inverse"> <i
			class="icon-double-angle-up icon-only bigger-110"></i>
		</a>
	</div>
	<!-- /.main-container -->
	<script type="text/javascript">
	var alertDangerTemplateArea = $.format($("#alertDangerTemplateArea").val());	
	
		jQuery(function($) {
				$('#input_form').validate({
					errorElement: 'div',
					errorClass: 'help-block',
					rules: {
						"userName": {
							required: true,
							maxlength:30
						},
						"password":{
							required:true,
							maxlength:30
						},
						"phone":{
							required:true,
							phone:true
						},
						"confirmPhone": {
							required: true,
							equalTo:'#phone',
							phone:true
						}
					},
					messages: {
						"userName": {
							required: "账号名必填",
							maxlength:"账号名需少于30字"
						},
						"password":{
							required:"密码必填",
							maxlength:"密码少于30字"
						},
						"phone":{
							required:"联系电话必填",
							phone:"联系电话格式不正确"
						},
						"confirmPhone": {
							required: "请再次输入手机",
							equalTo: "两次手机号输入的不一致",
							phone:"联系电话格式不正确"
						}
					},
					highlight: function (e) {
						$(e).closest('.form-group').removeClass('has-info').addClass('has-error');
					},
					success: function (e) {
						$(e).closest('.form-group').removeClass('has-error').addClass('has-info');
						$(e).remove();
					},
					submitHandler:function (form){
						$("select").removeAttr("disabled");
						$(form).find(":submit").attr("disabled", true);
						$.ajax({
				            url: '${ctxPath}/user/firmAdminSave',
				            type: 'POST',
				            data: $(form).serialize(),
				            dataType: 'json',
				            success: function(response) {
				            	if(response.success){
				            		location.href='${ctxPath}/user/firmAdminList/';
				            	}else{
				            		$("#errors_div").html(alertDangerTemplateArea(response.errorMsg));
				            		$('#input_form').find(":submit").attr("disabled", false);
				            	}
				            },
				            error : function(data,textstatus){  
				                alert(data.responseText);  
				            }  
				        });
					}
				});
			}); 

		</script>
</body>
</html>

